üîÅ VK ‚Üî Telegram Message Bridge

–î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π –º–æ—Å—Ç –º–µ–∂–¥—É –≥—Ä—É–ø–ø–æ–≤—ã–º —á–∞—Ç–æ–º –í–ö–æ–Ω—Ç–∞–∫—Ç–µ –∏ –∫–∞–Ω–∞–ª–æ–º/—á–∞—Ç–æ–º –≤ Telegram. –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ—Å—ã–ª–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∞–≤—Ç–æ—Ä–æ–≤, –Ω–∞ –±–∞–∑–µ telethon –∏ vk_api.
üìå –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

    üì• –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ Telegram –∏ –ø–µ—Ä–µ—Å—ã–ª–∫–∞ –≤ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ.

    üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ –≤ Telegram.

    üß† –ü—Ä–æ—Å—Ç–µ–π—à–µ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–æ–≤ VK.

    üì° –†–∞–±–æ—Ç–∞ —Å Telegram API —á–µ—Ä–µ–∑ StringSession.

    üîÑ –ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram Client –∏ VK LongPoll.

‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

    –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

pip install telethon vk_api

    –ü–æ–ª—É—á–∏ Telegram API ID –∏ Hash:
    ‚Üí https://my.telegram.org ‚Üí API Development Tools.

    –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π SESSION_STRING –¥–ª—è Telegram:

from telethon.sync import TelegramClient
from telethon.sessions import StringSession

with TelegramClient(StringSession(), API_ID, API_HASH) as client:
    print(client.session.save())

    –ü–æ–ª—É—á–∏ GROUP_TOKEN –¥–ª—è VK:
    ‚Üí https://vk.com/dev ‚Üí –°–æ–∑–¥–∞—Ç—å —Ç–æ–∫–µ–Ω —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ —Å –ø—Ä–∞–≤–∞–º–∏ messages.

üèó –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

project/
‚îú‚îÄ‚îÄ teleg_in.py     # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ VK –≤ Telegram
‚îú‚îÄ‚îÄ to_vk.py        # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ Telegram –≤ VK
‚îú‚îÄ‚îÄ vk_listener.py  # VK LongPoll —Å–ª—É—à–∞—Ç–µ–ª—å
‚îú‚îÄ‚îÄ telegram_listener.py  # Telegram —Å–ª—É—à–∞—Ç–µ–ª—å
‚îî‚îÄ‚îÄ README.md

üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å
1. Telegram ‚Üí VK

–§–∞–π–ª: telegram_listener.py
–ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ Telegram –∏ –≤—ã–∑—ã–≤–∞–µ—Ç write_msg() –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ.

@client.on(events.NewMessage(chat))
async def normal_handler(event):
    write_msg(event.message.message)

2. VK ‚Üí Telegram

–§–∞–π–ª: vk_listener.py
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç LongPoll, —á—Ç–æ–±—ã –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –ø–µ—Ä–µ—Å—ã–ª–∞—Ç—å –∏—Ö –≤ Telegram —á–µ—Ä–µ–∑ prinyalotvk():

if event.message.peer_id == int(peer_id):
    # –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–µ–Ω–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è
    ...
    teleg_in.prinyalotvk(message)

3. –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ VK

–§–∞–π–ª: to_vk.py
–§—É–Ω–∫—Ü–∏—è write_msg() –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç Telegram –≤ –±–µ—Å–µ–¥—É VK:

vk_session.method('messages.send', {...})

4. –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram

–§–∞–π–ª: teleg_in.py
–§—É–Ω–∫—Ü–∏—è prinyalotvk() –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –≤ Telegram-–∫–∞–Ω–∞–ª:

client.send_message(chat, message)

üõ† –ù–∞—Å—Ç—Ä–æ–π–∫–∏

–í –∫–∞–∂–¥–æ–º —Ñ–∞–π–ª–µ –Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ:

    API_ID, API_HASH, SESSION_STRING ‚Äî –¥–ª—è Telegram.

    GROUP_ID, GROUP_TOKEN, peer_id ‚Äî –¥–ª—è –í–ö–æ–Ω—Ç–∞–∫—Ç–µ.

    Telegram-–∫–∞–Ω–∞–ª/—á–∞—Ç: @Kecsik (–º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å).

    ‚ö†Ô∏è –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—É–±–ª–∏–∫—É–π —Ç–æ–∫–µ–Ω—ã –∏ —Å–µ—Å—Å–∏–æ–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –¥–æ—Å—Ç—É–ø–µ!

üë§ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π VK

–ê–≤—Ç–æ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ from_id:

if event.message.from_id == 134127477:
    name = "LanS: "
elif event.message.from_id == 287082324:
    name = "AlSimakoff: "
else:
    name = "No name: "

–¢—ã –º–æ–∂–µ—à—å —Ä–∞—Å—à–∏—Ä–∏—Ç—å —ç—Ç—É –ª–æ–≥–∏–∫—É –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–º–µ–Ω–∞ –∏–∑ —Å–ª–æ–≤–∞—Ä—è.
üìå –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

    –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–ª–æ–∂–µ–Ω–∏–π –≤ VK –ø–æ–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.

    –°–æ–æ–±—â–µ–Ω–∏—è —Å –≤–ª–æ–∂–µ–Ω–∏—è–º–∏ –≤ Telegram –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è (—Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç).

    –°–∫—Ä–∏–ø—Ç—ã –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–∞–∫ —Ñ–æ–Ω–æ–≤—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏–ª–∏ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª.

üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License
